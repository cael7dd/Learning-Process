var Block=function(){function b(a,b,c,d,e,f){this._img=a;this._x=d;this._y=e;this._width=b;this._height=c;this._block=document.createElement("div");this._block.className="block";this._block.style.width=this._width+"px";this._block.style.height=this._height+"px";f.appendChild(this._block);this.createBlock()}b.prototype.createBlock=function(){this._block.style.background="url('"+this._img+"') no-repeat "+-this._x*this._width+"px "+-this._y*this._height+"px";this._block.style.backgroundSize="600px 400px"};
b.prototype.getBlock=function(){return this._block};b.prototype.setImg=function(a){this._img=a;this._block.style.backgroundImage="url('"+this._img+"')"};return b}(),Main=function(){function b(){this._blocks=[];this._container=document.querySelector("#d_container");this._imgPath="../img/a (1).jpg;../img/a (2).jpg;../img/a (3).jpg;../img/a (4).jpg;../img/a (5).jpg;../img/a (6).jpg;../img/a (7).jpg;../img/a (8).jpg;../img/a (9).jpg".split(";");this._currentIndex=0;this._busy=!1;this._pieceNum=5;this._animationDuration=
1;this._delay=.04;this._imgWidth=600/this._pieceNum;this._imgHeight=400/this._pieceNum;this._btnLeft=document.querySelector("#d_left");this._btnRight=document.querySelector("#d_right");this.addImg();this.addListeners();this.interval()}b.prototype.addImg=function(){for(var a=0;a<this._pieceNum;a++)for(var b=0;b<this._pieceNum;b++){var c=new Block(this._imgPath[this._currentIndex],this._imgWidth,this._imgHeight,b,a,this._container);this._blocks.push(c)}};b.prototype.interval=function(){this._intervalId=
setInterval(this.addAnimation.bind(this,!0),4E3)};b.prototype.addListeners=function(){var a=this;this._btnLeft.addEventListener("click",function(){a._busy||(a._busy=!0,a.addAnimation(!1))});this._btnRight.addEventListener("click",function(){a._busy||(a._busy=!0,a.addAnimation(!0))})};b.prototype.judgeIndex=function(){0>this._currentIndex?this._currentIndex=this._imgPath.length-1:null;this._currentIndex==this._imgPath.length?this._currentIndex=0:null};b.prototype.addAnimation=function(a){var b=this,
c=this;a?this._currentIndex++:this._currentIndex--;this.judgeIndex();for(a=0;a<this._blocks.length;a++)this._blocks[a].getBlock().style.animation="next "+this._animationDuration+"s ease "+this._delay*a+"s forwards",function(a){setTimeout(function(){c._blocks[a].setImg(c._imgPath[c._currentIndex]);c._blocks[a].getBlock().style.animation="last "+c._animationDuration+"s ease forwards"},1E3*(c._delay*a+c._animationDuration))}(a);setTimeout(function(){b._busy=!1},1E3*(this._delay*this._blocks.length+this._animationDuration))};
return b}();new Main;
