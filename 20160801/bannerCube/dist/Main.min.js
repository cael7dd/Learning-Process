var Block=function(){function c(a,b,c,d){this._pieces=[];this._img=a;this._x=b;this._width=600/d;this._poiX=-this._x*this._width;this._block=document.createElement("div");this._block.className="blockContainer";this._block.style.width=this._width+"px";c.appendChild(this._block);this.createBlock()}c.prototype.createBlock=function(){for(var a=0;3>a;a++){var b=document.createElement("div");b.className="blockPiece";this._pieces.push(b);b.style.transform="rotateX("+(90-90*a)+"deg) translateZ(200px)";b.style.background=
"url('"+this._img[a]+"') no-repeat "+this._poiX+"px";b.style.backgroundSize="600px  400px";this._block.appendChild(b)}};c.prototype.getBlock=function(){return this._block};c.prototype.getX=function(){return this._x};c.prototype.getBlockPieceArray=function(){return this._pieces};c.prototype.setImg=function(a){this._img=a;for(a=0;3>a;a++)this._pieces[a].style.backgroundImage="url('"+this._img[a]+"')"};return c}(),Main=function(){function c(){this._blocks=[];this._container=document.querySelector("#d_container");
this._imgPath="../img/a (1).jpg;../img/a (2).jpg;../img/a (3).jpg;../img/a (4).jpg;../img/a (5).jpg;../img/a (6).jpg;../img/a (7).jpg;../img/a (8).jpg;../img/a (9).jpg".split(";");this._currentIndex=0;this._pieceNum=20;this._busy=!1;this._animationDuration=2;this._delay=.1;this._btnLeft=document.querySelector("#d_left");this._btnRight=document.querySelector("#d_right");this.addImg();this.interval();this.addListeners()}c.prototype.addImg=function(){for(var a=0;a<this._pieceNum;a++){var b=new Block(this.getPiecesImg(),
a,this._container,this._pieceNum);this._blocks.push(b)}};c.prototype.interval=function(){var a=this;this._intervalId=setInterval(function(){a._busy||(a._busy=!0,a.addAnimation(!0))},3E3)};c.prototype.getPiecesImg=function(){var a=this._currentIndex-1;0>a?a=this._imgPath.length-1:null;var b=this._currentIndex+1;b==this._imgPath.length?b=0:null;return[this._imgPath[a],this._imgPath[this._currentIndex],this._imgPath[b]]};c.prototype.addListeners=function(){var a=this;this._btnLeft.addEventListener("click",
function(){a._busy||(a._busy=!0,a.addAnimation(!1))});this._btnRight.addEventListener("click",function(){a._busy||(a._busy=!0,a.addAnimation(!0))})};c.prototype.addAnimation=function(a){var b=this,c;a?c="next":c="last";for(var d=0;d<this._blocks.length;d++)this._blocks[d].getBlock().style.animation=c+" "+this._animationDuration+"s "+this._delay*d+"s forwards";setTimeout(function(){b._busy=!1;a?b._currentIndex++:b._currentIndex--;0>b._currentIndex?b._currentIndex=b._imgPath.length-1:null;b._currentIndex==
b._imgPath.length?b._currentIndex=0:null;b.changeImg();for(var c=0;c<b._blocks.length;c++)b._blocks[c].getBlock().style.animation=""},1E3*(this._delay*this._blocks.length+this._animationDuration))};c.prototype.changeImg=function(){for(var a=0;a<this._blocks.length;a++)this._blocks[a].setImg(this.getPiecesImg())};return c}();new Main;
